(this.webpackJsonpwebapp=this.webpackJsonpwebapp||[]).push([[0],{126:function(e,t,n){},128:function(e,t,n){},129:function(e,t,n){"use strict";n.r(t);var c=n(0),o=n.n(c),i=n(40),s=n.n(i),r=n(14),a=n(165),u=n(167),d=n(164),b=n(3),j={filterState:{brightness:0,setBrightness:function(){return 0},contrast:0,setContrast:function(){return 0},nightVision:!1,setNightVision:function(){return!1}},connectionState:{connected:!1,setConnected:function(){return!1},address:"192.168.50.5",setAddress:function(){return"192.168.50.5"}}},l=Object(c.createContext)(j);function f(){return Object(c.useContext)(l)}var h=function(e){var t=e.children,n=Object(c.useState)(0),o=Object(r.a)(n,2),i=o[0],s=o[1],a=Object(c.useState)(0),u=Object(r.a)(a,2),d=u[0],j=u[1],f=Object(c.useState)(!1),h=Object(r.a)(f,2),O=h[0],g=h[1],x=Object(c.useState)(!1),m=Object(r.a)(x,2),v=m[0],p=m[1],C=Object(c.useState)("192.168.0.199"),S=Object(r.a)(C,2),y={filterState:{brightness:i,setBrightness:s,contrast:d,setContrast:j,nightVision:O,setNightVision:g},connectionState:{connected:v,setConnected:p,address:S[0],setAddress:S[1]}};return Object(b.jsx)(l.Provider,{value:y,children:t})},O=n(70),g=n(31),x=n(71),m=function(){var e=Object(c.useState)(!1),t=Object(r.a)(e,2),n=t[0],o=t[1],i=f().filterState,s=i.brightness,j=i.setBrightness,l=i.contrast,h=i.setContrast,m=i.nightVision,v=i.setNightVision;Object(c.useEffect)((function(){return o("granted"===Notification.permission)}),[]);return Object(b.jsx)(O.a,{fluid:"sm",className:"mt-3 mb-5",children:Object(b.jsxs)(x.a,{className:"align-items-center justify-content-center",children:[Object(b.jsx)(g.a,{xs:8,children:Object(b.jsx)(a.a,{label:"Brightness",min:-100,max:100,step:10,value:s,onChange:function(e){return j(e)},showValue:!0,originFromZero:!0})}),Object(b.jsx)(g.a,{xs:3,children:Object(b.jsx)(u.a,{label:"Nightvision",onText:"On",offText:"Off",onChange:function(e,t){return v(null!==t&&void 0!==t&&t)},checked:m})}),Object(b.jsx)(g.a,{xs:8,children:Object(b.jsx)(a.a,{label:"Contrast",min:-100,max:100,step:10,value:l,onChange:function(e){return h(e)},showValue:!0,originFromZero:!0})}),Object(b.jsx)(g.a,{xs:3,children:Object(b.jsx)(d.a,{text:"Reset",onClick:function(){j(0),h(0),v(!1)}})}),!n&&Object(b.jsx)(g.a,{xs:"auto",className:"mt-4",children:Object(b.jsx)(d.a,{text:"Enable notifications",onClick:function(){n||Notification.requestPermission().then((function(e){o("granted"===e)}))}})})]})})},v=n(76),p={body:"Motion detected! Click here to view baby monitor.",icon:"../static/android-chrome-192x192.png",renotify:!0,tag:"babyMonitor"},C={body:"Connected to BabyMonitor notifications.",icon:"../static/android-chrome-192x192.png",renotify:!1,tag:"connection"},S=function(){var e=Object(v.io)({reconnectionAttempts:5,reconnectionDelay:1e3,reconnectionDelayMax:5e3,timeout:2e4,requestTimeout:1e3});return e.on("connect",(function(){e.io.engine.requestTimeout=0,console.log("Socket connected.");new Notification("BabyMonitor connected",C)})),e.on("connect_error",(function(e){console.log("Connection failed... ".concat(e))})),e.on("disconnect",(function(e){console.log("Socket disconnected. Reason: ".concat(e))})),e.on("error",(function(e){console.log("Error: ".concat(e))})),e.on("motion",(function(e){console.log("Motion detected! "+e);new Notification("BabyMonitor",p)})),e},y=n(166),N=n(21),k=(n(126),function(){var e=f(),t=e.filterState,n=t.brightness,o=t.contrast,i=t.nightVision,s=e.connectionState,a=s.connected,u=s.setConnected,d=Object(c.useRef)(null),j=Object(c.useState)(!1),l=Object(r.a)(j,2),h=l[0],O=l[1],g=Object(c.useState)("brightness(".concat(n+100,"%) \n        contrast(").concat(o+100,"%)\n        hue-rotate(").concat(i?"90deg":"0",")\n        saturate(").concat(i?"10":"1",")")),x=Object(r.a)(g,2),m=x[0],v=x[1];Object(c.useEffect)((function(){v("brightness(".concat(n+100,"%) \n            contrast(").concat(o+100,"%) \n            hue-rotate(").concat(i?"90deg":"0",") \n            saturate(").concat(i?"10":"1",")"))}),[n,o,i]);return Object(b.jsxs)(b.Fragment,{children:[!a&&Object(b.jsx)("div",{id:"loader",children:Object(b.jsx)(y.a,{label:"Connecting to camera...",size:N.a.large})}),Object(b.jsx)("div",{ref:d,children:Object(b.jsx)("img",{id:"videoFeed",style:{filter:m},src:"/video_feed",onDoubleClick:function(){var e;h?document.exitFullscreen().then((function(){return O(!1)})):null===(e=d.current)||void 0===e||e.requestFullscreen({navigationUI:"hide"}).then((function(){return O(!0)}))},onLoad:function(){return u(!0)}})})]})});var w=function(){Object(c.useEffect)((function(){S()}),[]);var e=f().connectionState.connected;return Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)("header",{className:"App-header"}),Object(b.jsx)(k,{}),e&&Object(b.jsx)(m,{})]})};n(127),n(128);s.a.render(Object(b.jsx)(o.a.StrictMode,{children:Object(b.jsx)(h,{children:Object(b.jsx)(w,{})})}),document.getElementById("root"))}},[[129,1,2]]]);
//# sourceMappingURL=main.15f16428.chunk.js.map